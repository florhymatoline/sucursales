<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Blog - Sailor Bootstrap Template</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!--MODAL LINKS-->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top d-flex align-items-center">
    <div class="container d-flex align-items-center">

      <h1 class="logo me-auto"><a href="index.html">Sailor</a></h1>
      <nav id="navbar" class="navbar">
        <ul>
          <li><a href="index.html">Home</a></li>

          <li class="dropdown"><a href="#"><span>About</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="about.html">About</a></li>
              <li><a href="team.html">Team</a></li>
              <li><a href="testimonials.html">Testimonials</a></li>

              <li class="dropdown"><a href="#"><span>Deep Drop Down</span> <i class="bi bi-chevron-right"></i></a>
                <ul>
                  <li><a href="#">Deep Drop Down 1</a></li>
                  <li><a href="#">Deep Drop Down 2</a></li>
                  <li><a href="#">Deep Drop Down 3</a></li>
                  <li><a href="#">Deep Drop Down 4</a></li>
                  <li><a href="#">Deep Drop Down 5</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a href="services.html">Services</a></li>
          <li><a href="portfolio.html">Portfolio</a></li>
          <li><a href="pricing.html">Pricing</a></li>
          <li><a href="blog.html" class="active">Blog</a></li>

          <li><a href="contact.html">Contact</a></li>
          <a href="logout.php" class="getstarted">LOG OUT</a>
          
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section id="breadcrumbs" class="breadcrumbs">
      <div class="container">

        <div class="d-flex justify-content-between align-items-center">
          <h2>Sucursales</h2>
          
        </div>

      </div>
    </section><!-- End Breadcrumbs -->

    <!-- ======= Blog Section ======= -->
    <section id="blog" class="blog">
      <div class="container" data-aos="fade-up">

        
        <div class="row justify-content-center">

          <div class="col-lg-8 text-center ">

            <div class="sidebar">

              <h3 class="sidebar-title">Search</h3>

              <div class="row">
                <div class="col ">
                    <div class="form">
                        <input type="text" id="idINnombre" class="form-control" placeholder="Ingrese un Nombre"
                            aria-describedby="TextHelpBlock">
                        
                </div>
            </div>
        </div>
              </div><!-- End sidebar recent posts-->

              
            </div><!-- End sidebar -->

          </div><!-- End blog sidebar -->

          <div class="col-12 bg-light text-center ">
                    
            <table class="table table-striped ">
                <thead>
                    <td>Id</td>
                    <td>Sucursal</td>
                    <td>Localización</td>
                    <td>Capacidad Maxíma</td>
                    <td>Usuario</td>
                    <td><button id="myBtn" style="border-style:none; background-color: rgb(252, 252, 252);" ><img src="img/agregar.png" width="30px" alt=""></button></td>
                    
                </thead>
                <tbody id="idTB1">
                </tbody>
        </div>
        </div>

      </div>
    </section><!-- End Blog Section -->

  </main><!-- End #main -->



  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!--JQUERY TABLA DE USUARIOS-->
  <script >
    $(document).ready(function () {
        $('#idINnombre').keyup(function () {
            $("#idTB1").empty()
            var p = $('#idINnombre').val();
            if (p != "") {
                $.ajax({
                    url: "tabla-s.php",
                    type: "GET",
                    data: { "sucursal": p},
                    dataType: "json",
                    success: function (respuesta) {
                        $.each(respuesta, function (key, value) {
                            $("#idTB1").append("<tr>" +
                                "<td id='id_t'>" + value.id_sucursal + "</td>" +
                                "<td>" + value.sucursal + "</td>" +
                                "<td>" + value.localizacion + "</td>" +
                                "<td>" + value.capacidad_max + "</td>" +
                                "<td>" + value.id_user + "</td>" +

                                "<td><a id='editar' >editar</a></td>" +

                                "</tr>")
                        })
                    }
                })
                }
            })

    //AGREGAR USUARIO NUEVO
    $('#agregar').click(function(){
        
        var su=$('#sucursal1').val();
        var loc=$('#localizacion1').val();
        var cm=$('#capacidad_max1').val();
        var us=$('#id_user1').val();
        
    
            $.ajax({
                type:"POST",
                url:"agregar-s.php",
                data: {"sucursal1": su, "localizacion1": loc, "capacidad_max1":cm,  "id_user1":us},
                dataType: "json",
            });
            
            $('#myModal1').modal('hide')
            alert("REALIZADO")
            $('#sucursal1').val('');
            $('#localizacion1').val('');
            $('#capacidad_max1').val('');
            $('#id_user1').val('');
            
        });

        //MODIFICAR USUARIO
        $('#idTB1').on('click','#editar', function(e) {
          $('#myModal').modal('show');
            e.preventDefault();
            
            var filaactual = $(this).closest("tr"); // obtiene la fila actual
            var id = filaactual.find("td:eq(0)").text(); // obtiene el valor del primer TD de la fila actual
            $.ajax({
                    type:"POST",
                    url:"completar-s.php",
                    data:{"id":id},
                    dataType:"json",
                    success: function(respuesta){
                        $.each(respuesta, function(key, value){
                            $('#id').val(value.id_sucursal)
                            $('#sucursal').val(value.sucursal)
                            $('#localizacion').val(value.localizacion)
                            $('#capacida_max').val(value.capacidad_max)
                            $('#id_user').val(value.id_user)
                            
                        });
                    }
                });
              });
        

                $('#enviar').click(function(){
                  var id=$('#id').val();
                  var su=$('#sucursal').val();
                  var loc=$('#localizacion').val();
                  var cm=$('#capacidad_max').val();
                  var us=$('#id_user').val();
        
            $.ajax({
                type:"POST",
                url:"editar-s.php",
                data: {"id":id, "sucursal": su, "localizacion": loc, "capacidad_max":cm,  "id_user":us},
                dataType: "json",
                success: function(respuesta){
                        $.each(respuesta, function(key, value){
                          $('#myModal').modal('hide');
                          alert("REALIZADO")
                        });
                    }
            });
            
            $('#myModal').modal('hide');
            alert("REALIZADO")
        });

        
        //BORRAR USUARIO
        
        $('#borrar').click(function(){
                var opcion = confirm("Desea borrar el usuario? ");
                if (opcion == true) {
                    var usuariomodal=$('#sucursal').val()

                    $.ajax({
                        url:"borrar-s.php",
                        type:"POST",
                        data:{"sucursal":usuariomodal},
                        dataType:"json",
                    });
                    $('#myModal').modal('hide')
                }
            });

            
//BOTON MODAL DE AGREGAR USUARIO
        $('#myBtn1').click(function(){
                $('#myModal').modal('show');
        });

    }); 
  </script>

      <!-- MODAL -->
      <div class="modal fade " id="myModal" style="padding-top: 4rem;" role="dialog">
        <div class="modal-dialog">

        <!-- CONTENIDO DEL MODAL-->
        <div class="col-9 modal-content">
            <div class="modal-header"  style="padding:35px 50px;">
                
                <h4> Sucursal</h4>
            </div>
            <div class="modal-body text-start " style="padding:40px 50px;">
                <form  method="POST" action="">
                    <div class="form-group">
                        <label > Id</label>
                        <input type="number"  class="form-control" id="id" name="id" placeholder="1" disabled >
                    </div>
                    <div class="form-group">
                        <label > Sucursal</label>
                        <input type="text" class="form-control" id="sucursal" name="sucursal" placeholder="Sucursal">
                    </div>
                    <div class="form-group">
                        <label > Localización</label>
                        <input type="text" class="form-control" id="localizacion" name="localizacion" placeholder="Ubicacion 123">
                    </div>
                    <div class="form-group">
                        <label > Capacidad Maxíma</label>
                        <input type="number" min="1" class="form-control" id="capacidad_max" name="capacidad_max" placeholder="100">
                    </div>
                  <div class="form-group">
                    <label > Usuario</label>
                    <input type="text"  class="form-control" id="id_user" name="id_user" placeholder="Usuario123"  >
                </div><br>
                    <div class="row  justify-content-center m-auto">
                        <div class="col">
                        <button type="button" id="borrar" style="border-style:none; background-color: white;" ><img  src="img/borrar.png"></button>
                        
                        </div>
                        <div class="col ">
                        <button type="button" id="enviar" style="border-style:none; background-color: white;"><img src="img/guardar.png"></button>
                        </div>
                    </div>
                    </form>
            </div>
            
        </div>
    </div>
</div> 

<!-- MODAL DE AGREGAR-->
<div class="modal fade " id="myModal1" style="padding-top: 4rem;" role="dialog">
  <div class="modal-dialog">

  <!-- CONTENIDO DEL MODAL-->
  <div class="col-9 modal-content">
      <div class="modal-header"  style="padding:35px 50px;">
          
          <h4> Sucursal</h4>
      </div>
      <div class="modal-body text-start " style="padding:40px 50px;">
          <form  method="POST" action="">
              <div class="form-group">
                  <label > Id</label>
                  <input type="number"  class="form-control" id="id1" name="id1" placeholder="1" disabled >
              </div>
              <div class="form-group">
                  <label > Sucursal</label>
                  <input type="text" class="form-control" id="sucursal1" name="sucursal1" placeholder="Sucursal">
              </div>
              <div class="form-group">
                  <label > Localización</label>
                  <input type="text" class="form-control" id="localizacion1" name="localizacion1" placeholder="Ubicacion 123">
              </div>
              <div class="form-group">
                  <label > Capacidad Maxíma</label>
                  <input type="number" min="1" class="form-control" id="capacidad_max1" name="capacidad_max1" placeholder="100">
              </div>
            <div class="form-group">
              <label > Usuario</label>
              <input type="text"  class="form-control" id="id_user1" name="id_user1" placeholder="Usuario123"  >
          </div><br>
              <div class="row  justify-content-center m-auto">
                  <div class="col ">
                  <button type="button" id="agregar" style="border-style:none; background-color: white;"><img src="img/guardar.png"></button>
                  </div>
              </div>
              </form>
      </div>
      
  </div>
</div>
</div> 

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>